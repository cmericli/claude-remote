<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Claude Remote</title>

    <!-- PWA -->
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#f97316">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Claude Remote">
    <link rel="apple-touch-icon" href="/static/icons/icon-192.png">

    <!-- xterm.js -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-web-links@0.9.0/lib/xterm-addon-web-links.min.js"></script>

    <!-- Markdown & syntax highlighting -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github-dark.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>

    <!-- Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- App styles -->
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>

    <!-- Header -->
    <header id="appHeader">
        <div class="header-left">
            <button id="mobileMenuBtn" class="mobile-only" aria-label="Menu">&#9776;</button>
            <a href="#/" class="logo">
                <span class="logo-icon">&#9678;</span>
                <span class="logo-text">Claude Remote</span>
            </a>
        </div>
        <nav id="mainNav">
            <a href="#/" data-view="dashboard" class="nav-link active">Dashboard <span id="needsInputBadge" class="needs-input-badge" style="display:none">0</span></a>
            <a href="#/search" data-view="search" class="nav-link">Search</a>
            <a href="#/analytics" data-view="analytics" class="nav-link">Analytics</a>
        </nav>
        <div class="header-right">
            <div class="header-status">
                <span class="status-dot" id="headerStatusDot"></span>
                <span class="status-label" id="headerStatusLabel">Ready</span>
            </div>
        </div>
    </header>

    <!-- Mobile nav drawer -->
    <div id="mobileNavOverlay" class="mobile-overlay"></div>
    <div id="mobileNavDrawer" class="mobile-drawer">
        <div class="drawer-header">
            <span class="logo-icon">&#9678;</span>
            <span class="logo-text">Claude Remote</span>
        </div>
        <a href="#/" class="drawer-link" data-view="dashboard">Dashboard</a>
        <a href="#/search" class="drawer-link" data-view="search">Search</a>
        <a href="#/analytics" class="drawer-link" data-view="analytics">Analytics</a>
    </div>

    <!-- Main content area -->
    <main id="mainContent">

        <!-- Dashboard View -->
        <div id="view-dashboard" class="view active"></div>

        <!-- Session View -->
        <div id="view-session" class="view">
            <div id="session-header"></div>
            <div id="session-tabs" class="tab-bar">
                <button class="tab-btn active" data-tab="conversation">Conversation</button>
                <button class="tab-btn" data-tab="terminal">Terminal</button>
                <button class="tab-btn" data-tab="files">Files</button>
                <button class="tab-btn" data-tab="stats">Stats</button>
            </div>
            <div id="session-conversation" class="session-panel active"></div>
            <div id="session-terminal" class="session-panel">
                <div id="terminal-status-bar" class="terminal-mode-bar"></div>
                <div id="terminal-container"></div>
            </div>
            <div id="session-files" class="session-panel"></div>
            <div id="session-stats" class="session-panel"></div>
        </div>

        <!-- Search View -->
        <div id="view-search" class="view"></div>

        <!-- Analytics View -->
        <div id="view-analytics" class="view"></div>

    </main>

    <!-- Status bar -->
    <div id="statusBar">
        <span id="statusDot" class="status-dot"></span>
        <span id="statusText">Ready</span>
        <span id="statusMeta" class="status-meta"></span>
    </div>

    <!-- New session modal -->
    <div id="newSessionModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-card">
            <h3>New Session</h3>
            <label class="form-label">Working Directory
                <input type="text" id="modalWorkingDir" class="form-input" placeholder="~/workspace/project" value="~">
            </label>
            <label class="form-label">Resume Session ID (optional)
                <input type="text" id="modalResumeId" class="form-input" placeholder="Session UUID to resume">
            </label>
            <div class="modal-actions">
                <button class="btn btn-ghost" id="modalCancelBtn">Cancel</button>
                <button class="btn btn-primary" id="modalCreateBtn">Create Session</button>
            </div>
        </div>
    </div>

    <!-- App modules (order matters) -->
    <script src="/static/js/app.js"></script>
    <script src="/static/js/dashboard.js"></script>
    <script src="/static/js/conversation.js"></script>
    <script src="/static/js/terminal.js"></script>
    <script src="/static/js/search.js"></script>
    <script src="/static/js/analytics.js"></script>

</body>
</html>
